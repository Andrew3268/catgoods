<div class="index_box clearfix">
  <div class="index_left">  
    <div class="ctn_box">
      <h2>고양이 영양소 계산기</h2>
      <p>단백질, 탄수화물 지방 함량에 따른 하루 사료 권장량 계산하기</p>
      <!-- <a href="#n">#인기_많은_냥이용품_TOP_10</a> -->
    </div>
  </div>

  <div class="index_right">
    <div class="index_wrap">
      <%= render '/posts/header' %>

      <section class="search search_pc">
        <div class="search-inner">
            <button class="search-button">
              <img src="<%=asset_path 'search.png'%>" alt="냥이굿즈 찾기">
            </button>
            <%= form_for "",url: jibsas_path, role: "search", method: :get do %>
              <%= text_field_tag :search, @search_term, placeholder: "냥이 용품 찾기...", class: 'search-input' %>
            <% end %> 
          </div>
       </section>

       <%= render '/posts/navigation' %>

      <div id="outerbox">
        <h3> To calculate your daily caloric needs enter your: </h3>
        <div id="box"> 
            <div><p class="formtext"> 조단백 </p> <input type="number" placeholder="0" class="form" id="protien"></div>
            <div><p class="formtext"> 조지방 </p> <input type="number" placeholder="0" class="form" id="fat"></div>
            <div><p class="formtext"> 칼슘 </p> <input type="number" placeholder="0" class="form" id="calcium"></div>
            <div><p class="formtext"> 인 </p> <input type="number" placeholder="0" class="form" id="phosphorus"></div>
            <div><p class="formtext"> 칼로리 </p> <input type="number" placeholder="0" class="form" id="calorie"></div>
            <div><p class="formtext"> 수분 </p> <input type="number" placeholder="0" class="form" id="water"></div>
            <div><p class="formtext"> 조회분 </p> <input type="number" placeholder="0" class="form" id="ash"></div>
            <div><p class="formtext"> 조섬유 </p> <input type="number" placeholder="0" class="form" id="fiber"></div>

          <input type="submit" class="submit" onclick=nuTrient() value="Calculate"></input>
        </div>
            
        <div> 
          <p>수분을 제외한 영양소 비율</p>
          <p class='kcals'> 조단백: <span id="crudeProtein"></span>%</p> 
          <p class='kcals'> 조지방: <span id="fatContent"></span>%</p> 
          <p class='kcals'> 칼슘: <span id="calCium"></span>%</p> 
          <p class='kcals'> 인: <span id="phosPhorus"></span>%</p> 

          <hr />
          <p>탄수화물 함량</p>
          <p class='kcals'> 탄수화물 함량: <span id="blaNce"></span>%</p> 

          <hr />
          <p>100g당 칼로리</p>
          <p class='kcals'> 100g 당 단백질 칼로리: <span id="protienKcal"></span></p> 
          <p class='kcals'> 100g 당 지방 칼로리: <span id="fatKcal"></span></p> 
          <p class='kcals'> 100g 당 탄수화물 칼로리: <span id="carboKcal"></span></p> 
          <p class='kcals'> 100g 당 총(탄단지) 칼로리: <span id="totalKcal"></span></p> 

          <hr />
          <p>100g당 영양별 비율</p>
          <p class='kcals'> 100g 당 단백질: <span id="protienNutrient"></span>%</p> 
          <p class='kcals'> 100g 당 지방: <span id="fatNutrient"></span>%</p> 
          <p class='kcals'> 100g 당 탄수화물: <span id="carboNutrient"></span>%</p> 

          <hr />

          <p class='kcals'> 사료 라벨 조단백 <span id="justResult"></span>%</p> 
        </div>
      

      
      
      
    </div>

  </div><!-- end index_right -->
</div>



<script type="text/javascript">
// 고양이 사료 영양소 계산기 JS //
function nuTrient() {
  function find(id) {
    return document.getElementById(id);}
  var protien = find("protien").value;
  var calorie = find("calorie").value;
  var fat = find("fat").value;
  var phosphorus = find("phosphorus").value;
  var calcium = find("calcium").value;
  var water = find("water").value;
  var ash = find("ash").value;
  var fiber = find("fiber").value;

  //////// 사료 라벨 수치 ////////
  //조단백
  var just_result = 0;
    just_result = protien;
  find("justResult").innerHTML = just_result;

  //////// 변환된 수치 ////////
  //조단백
  var protien_result = 0;
    protien_result = 100 * protien / (100 - water)  * 4000 / calorie;
  // find("crudeProtein").innerHTML = Math.round(protien_result);
  find("crudeProtein").innerHTML = (protien_result.toFixed(1));

  //조지방
  var fat_result = 0;
    fat_result = 100 * fat / (100 - water)  * 4000 / calorie;
  // find("fatContent").innerHTML = Math.round(fat_result);
  find("fatContent").innerHTML = (fat_result.toFixed(1));

  //칼슘
  var calcium_result = 0;
    calcium_result = 100 * calcium / (100 - water)  * 4000 / calorie;
  find("calCium").innerHTML = (calcium_result.toFixed(1));

  //인
  var phosphorus_result = 0;
    phosphorus_result = 100 * phosphorus / (100 - water)  * 4000 / calorie;
  find("phosPhorus").innerHTML = (phosphorus_result.toFixed(1));

  
  //////// 탄단지 비율 ////////
  //탄수화물 비율
  var carbo_blance_result =0;
    carbo_blance_result = 100 - protien - fat - water - ash - fiber;
  find("blaNce").innerHTML = (carbo_blance_result.toFixed(1));


  //////// 100g 당 칼로리 ////////
  //100g 당 단백질 칼로리
  var protien_kcal_result = 0;
    protien_kcal_result = protien * 3.5;
  find("protienKcal").innerHTML = (protien_kcal_result.toFixed(1));    

  //100g 당 지방 칼로리
  var fat_kcal_result = 0;
    fat_kcal_result = fat * 8.5;
  find("fatKcal").innerHTML = (fat_kcal_result.toFixed(1));    

  //100g 당 탄수화물 칼로리
  var carbo_kcal_result = 0;
    carbo_kcal_result = carbo_blance_result * 3.5;
  find("carboKcal").innerHTML = (carbo_kcal_result.toFixed(1));    

  //100g 당 총 칼로리
  var total_kcal_result = 0;
    total_kcal_result = protien_kcal_result + fat_kcal_result + carbo_kcal_result;
  find("totalKcal").innerHTML = (total_kcal_result.toFixed(1));    

  //////// 100g 당 각 영양소(탄단지) 비율 ////////
  //100g 당 단백질 영양비율
  var protien_nutrient_result = 0;
    protien_nutrient_result = (protien_kcal_result / total_kcal_result) * 100;
  find("protienNutrient").innerHTML = (protien_nutrient_result.toFixed(1));    

  //100g 당 지방 영양비율
  var fat_nutrient_result = 0;
    fat_nutrient_result = (fat_kcal_result / total_kcal_result) * 100;
  find("fatNutrient").innerHTML = (fat_nutrient_result.toFixed(1));    

  //100g 당 탄수화물 영양비율
  var carbo_nutrient_result = 0;
    carbo_nutrient_result = (carbo_kcal_result / total_kcal_result) * 100;
  find("carboNutrient").innerHTML = (carbo_nutrient_result.toFixed(1));    

  }
</script>